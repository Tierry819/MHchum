<!DOCTYPE html>
<html lang="zh" dir="ltr">

<head>
    <base href="../../..">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/logo/logo-icon.svg">
    <title>敏惠醫護後台系統</title>
    <!-- Custom CSS -->
    <link href="dist/css/style.min.css" rel="stylesheet">
    <link href="dist/css/MHcustom.css" rel="stylesheet">
    <!-- Material Design Icons -->
    <link href="https://cdn.materialdesignicons.com/6.5.95/css/materialdesignicons.min.css" rel="stylesheet">
</head>

<body class="horizontal-nav skin-green fixed-layout">
    <!-- ============================================================== -->
    <!-- Preloader -->
    <!-- ============================================================== -->
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>

    <!-- ============================================================== -->
    <!-- Main wrapper -->
    <!-- ============================================================== -->
    <section id="main-wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header -->
        <!-- ============================================================== -->
        <header class="topbar">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header">
                    <a class="navbar-brand" href="html/index.html">
                        <img src="assets/images/logo/logo-icon.svg" alt="homepage" height="32" />
                        <img src="assets/images/logo/logo-text.svg" alt="homepage" height="30" />
                    </a>
                </div>

                <div class="navbar-collapse">
                    <ul class="navbar-nav my-lg-0 ms-auto">
                        <li class="nav-item dropdown u-pro">
                            <a class="nav-link dropdown-toggle waves-effect waves-dark profile-pic" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="assets/images/users/null.jpg" alt="user"> 
                                <span class="hidden-md-down fw-bold">學務主任 &nbsp;<i class="fa fa-angle-down"></i></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end animated flipInY">
                                <a href="javascript:void(0)" class="dropdown-item"><i class="ti-settings"></i> 帳號管理</a>
                                <div class="dropdown-divider"></div>
                                <a href="html/login.html" class="dropdown-item"><i class="fa fa-power-off"></i> 登出</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <!-- ============================================================== -->
        <!-- End Topbar header -->
        <!-- ============================================================== -->

        <!-- ============================================================== -->
        <!-- Page wrapper -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
            <div class="container-fluid">
                <!-- Breadcrumb -->
                <nav class="breadcrumb align-items-center">
                    <i class="mdi mdi-24px mdi-home me-1"></i><a class="breadcrumb-item" href="html/index.html">首頁</a>
                    <a class="breadcrumb-item" href="html/dashboard/dashboard-index.html">數據分析</a>
                    <a class="breadcrumb-item" href="html/dashboard/admissions-analysis/index-admissions-analysis.html">招生資料分析</a>
                    <span class="breadcrumb-item active">學資訊獲得來源分析</span>
                </nav>

                <!-- Filter -->
                <div class="card rounded mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="acad_year" class="form-label">學年度</label>
                                <select id="acad_year" name="acad_year" class="form-select" aria-label="學年度">
                                    <option value="114">114</option>
                                    <option value="113">113</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="edu_system" class="form-label">學制</label>
                                <select id="edu_system" name="edu_system" class="form-select" aria-label="學制">
                                    <option value="day">日-五專</option>
                                    <option value="ce">二專-進修部</option>
                                    <option value="is">二專-在職專班</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="department" class="form-label">科別</label>
                                <select id="department" name="department" class="form-select" aria-label="科別">
                                    <option value="all">全校</option>
                                    <option value="nursing">護理科</option>
                                    <option value="cosmetology">美保科</option>
                                    <option value="childcare">幼保科</option>
                                    <option value="gerontology">長健科</option>
                                    <option value="dental-tech">牙技科</option>
                                </select>
                            </div>
                            <div class="col-md-3 mb-3">
                                <label for="source_aspect" class="form-label">來源面向</label>
                                <select id="source_aspect" name="source_aspect" class="form-select" aria-label="來源面向">
                                    <option value="student">學生面</option>
                                    <option value="school">學校面</option>
                                    <option value="promotion">學校文宣</option>
                                    <option value="other">其他</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart and Table Card -->
                <div class="card">
                    <div class="card-body py-5">
                        <!-- Title -->
                        <h3 class="text-center mb-3">114學年度 日-五專 全校 學資訊獲得來源分析</h3>

                        <!-- Canvas for Chart.js with RWD-->
                        <div class="row justify-content-center mb-4">
                            <div class="col-12 col-lg-10">
                                <div class="chart-container">
                                    <canvas id="info-source-doughnut"></canvas>
                                </div>
                            </div>
                        </div>

                        <h3 class="text-center mb-3 mt-5">學生面 學資訊獲得來源細項分析</h3>

                        <!-- Canvas for Chart.js with RWD-->
                        <div class="row justify-content-center mb-4">
                            <div class="col-12 col-lg-10">
                                <div class="chart-container">
                                    <canvas id="info-source-bar"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Table with RWD -->
                        <div class="row justify-content-center">
                            <div class="col-12 col-lg-6">
                                <div class="table-responsive">
                                    <table class="table table-bordered text-center">
                                        <thead class="bg-light">
                                            <tr>
                                                <th>學資訊來源細項</th>
                                                <th>人數</th>
                                                <th>百分比</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th>敏惠校友介紹</th>
                                                <td>45</td>
                                                <td>30.0%</td>
                                            </tr>
                                            <tr>
                                                <th>國中師長介紹</th>
                                                <td>35</td>
                                                <td>23.3%</td>
                                            </tr>
                                            <tr>
                                                <th>國中同學介紹</th>
                                                <td>30</td>
                                                <td>20.0%</td>
                                            </tr>
                                            <tr>
                                                <th>學長姐介紹</th>
                                                <td>25</td>
                                                <td>16.7%</td>
                                            </tr>
                                            <tr>
                                                <th>親友介紹</th>
                                                <td>15</td>
                                                <td>10.0%</td>
                                            </tr>
                                            <tr class="bg-light text-danger fw-bold">
                                                <th>總計</th>
                                                <td>150</td>
                                                <td>100.0%</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <footer class="footer text-center">
                    All Rights Reserved by 敏惠醫護管理專科學校
                </footer>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper -->
        <!-- ============================================================== -->
    </section>
    <!-- ============================================================== -->
    <!-- End Main wrapper -->
    <!-- ============================================================== -->

    <!-- ============================================================== -->
    <!-- All Jquery -->
    <!-- ============================================================== -->
    <!-- Bootstrap Bundle with Popper -->
    <script src="assets/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="assets/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <!-- slimscrollbar scrollbar JavaScript -->
    <script src="dist/js/perfect-scrollbar.jquery.min.js"></script>
    <!-- Wave Effects -->
    <script src="dist/js/waves.js"></script>
    <!-- Menu sidebar -->
    <script src="dist/js/sidebarmenu.js"></script>
    <!-- sticky kit -->
    <script src="assets/node_modules/sticky-kit-master/dist/sticky-kit.min.js"></script>
    <script src="assets/node_modules/sparkline/jquery.sparkline.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="dist/js/custom.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <!-- 共用色票 -->
    <script src="dist/js/chart-colors.js"></script>
    <script>

        // Doughnut Chart - 學資訊來源面向分析
        const doughnutLabels = ['學生面', '學校面', '學校文宣', '其他'];
        const doughnutData = {
            labels: doughnutLabels,
            datasets: [{
                label: '人數',
                data: [150, 80, 60, 30],
                backgroundColor: [
                    ChartColors.backgrounds[0],
                    ChartColors.backgrounds[1],
                    ChartColors.backgrounds[2],
                    ChartColors.backgrounds[3]
                ],
                borderColor: [
                    ChartColors.borders[0],
                    ChartColors.borders[1],
                    ChartColors.borders[2],
                    ChartColors.borders[3]
                ],
                borderWidth: 2
            }]
        };

        const doughnutConfig = {
            type: 'doughnut',
            data: doughnutData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { boxWidth: 12, padding: 10 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.parsed || 0;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((value / total) * 100).toFixed(1);
                                return `${label}: ${value}人 (${percentage}%)`;
                            }
                        }
                    },
                    datalabels: {
                        font: {
                            weight: 'bold',
                            size: 16
                        },
                        formatter: function(value, context) {
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percentage = ((value / total) * 100).toFixed(1);
                            return percentage + '%';
                        }
                    }
                }
            },
            plugins: [ChartDataLabels]
        };

        // Initialize Doughnut Chart
        const doughnutChart = new Chart(
            document.getElementById('info-source-doughnut'),
            doughnutConfig
        );


        // Bar Chart - 學資訊來源細項分析
        const barLabels = ['敏惠校友介紹', '國中師長介紹', '國中同學介紹', '學長姐介紹', '親友介紹'];
        const barData = {
            labels: barLabels,
            datasets: [{
                label: '人數',
                data: [45, 35, 30, 25, 15],
                backgroundColor: [
                    ChartColors.backgrounds[0],
                    ChartColors.backgrounds[1],
                    ChartColors.backgrounds[2],
                    ChartColors.backgrounds[3],
                    ChartColors.backgrounds[4]
                ],
                borderColor: [
                    ChartColors.borders[0],
                    ChartColors.borders[1],
                    ChartColors.borders[2],
                    ChartColors.borders[3],
                    ChartColors.borders[4]
                ],
                borderWidth: 1
            }]
        };

        const barConfig = {
            type: 'bar',
            data: barData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed.y || 0;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((value / total) * 100).toFixed(1);
                                return `${value}人 (${percentage}%)`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: '學資訊來源細項（可複選）'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: '人數'
                        }
                    }
                }
            }
        };

        // Initialize Bar Chart
        const barChart = new Chart(
            document.getElementById('info-source-bar'),
            barConfig
        );
    </script>

</body>

</html>